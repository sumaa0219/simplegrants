# DigDAO マッチングドネーション 💰

GitcoinのGrants Stack, clr.fundなどがWeb3（仮想通貨）での寄付を前提しているのに対し、fiat（法定通貨）での寄付を前提としてるQuadratic Funding（QF）のためのプラットフォーム。

このプロジェクトはOwockiが率いるSupermodulerチームが「Simple Grant」という名で開発されていたが、[頓挫](https://github.com/supermodularxyz/simplegrants)。[現在はGitcoinの下でWeb2 QFツールが開発されているが、途中。](https://github.com/gitcoinco/simplegrants.xyz) この状況により、DigDAO マッチングドネーションでは元々のツールを使うことにした。

## リストにプロジェクトを掲載したい人へ
- https://scrapbox.io/public-goods-funding/%E5%85%AC%E7%9B%8A%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A8%E3%81%97%E3%81%A6%E6%8E%B2%E8%BC%89%E3%81%97%E3%81%9F%E3%81%84%E4%BA%BA%E3%81%B8 をご覧ください

## 主な構造 📄

- [バックエンド](./backend/)
- [フロントエンド](./frontend/)

## プロジェクトの目的 🎯
- 現在、クリプト界隈ではQFはメジャーになりつつあるが、それ以外の組織（NPOなど）は使い始めるハードルはかなり高い。
- デジタル庁からフォークした[DigDAO](https://www.digdao.jp/)としてWeb2のQFプラットフォームを提供することで、新しい資金調達の形を実験する。

## このプロジェクトについて ❓

このプロジェクトは、DigDAOのImpact Fundingプロジェクトメンバーによって進められています。審査制のコミュニティですが、メンバーに声をかけて参加してください。


## このリポジトリの使い方 🛠

このリポジトリは`backend`および`frontend`の2つのフォルダに分かれており、フォルダ名は自己説明的です。セットアップ方法についての詳細は、各フォルダ内のREADMEをご覧ください！

## インストールとセットアップ 🧪

1. リポジトリをクローンする
2. `backend`フォルダに移動し、[Backend README](./backend/README.md)に記載されているインストールとセットアップの指示に従う。
3. `frontend`フォルダに移動し、[Frontend README](./frontend/README.md)に記載されているインストールとセットアップの指示に従う。

### ローカル開発 👨🏻‍💻

ローカル開発のためにサービスを実行したい場合は、以下の手順に従ってください。

1. まず、上記のように各フォルダのREADMEに記載されているとおりにすべてをインストールしセットアップします。まだサービスを実行する必要はありません。
2. 支払いプロバイダとしてStripeを使用している場合は、Stripe CLIがセットアップされ、すでにログインしていることを確認してください。
3. すべてがセットアップされたら、以下のコマンドを実行して必要なサービスをすぐに立ち上げます。

```bash
# フロントエンドとバックエンドの.envを適宜更新
# その後、全てをビルドして実行
# これにより、自動的にシード、マイグレーションが実行され、StripeのWebhookリスナーが起動します
$ npm run start:dev
```

### デプロイメント設定 🚀

このアプリケーションをデプロイしたい場合、プロセスを少し速めるのに役立つシンプルなスクリプトがあります。

1. まず、上記の各フォルダのREADMEに記載されているとおりに全てをインストールし、セットアップしてください。まだサービスを実行する必要はありません。
2. 全てがセットアップされたら、以下のコマンドを実行して必要なサービスを即座に立ち上げます。**注意: これは、複数のプラットフォームにホスティングするのではなく、Dockerを使用してすべてを一つのサーバーにデプロイすることを前提としています**。

```bash
# フロントエンドとバックエンドの.envを適宜更新
# その後、全てを一つのサーバーにデプロイ
# 必要に応じてシードとマイグレーションが自動的に実行されます
$ npm run start
```

3. 支払いプロバイダーのWebhookが適切に設定されていることを確認してください。
4. Dockerを使用しているため、コンテナ間で`localhost`を介して通信することができないことを覚えておくことが非常に重要です。これは、理想的にはNGINX（または使用しているリバースプロキシ）をサービスを指すように設定し、環境変数を正規のURLを使用するように変更することを意味します。
